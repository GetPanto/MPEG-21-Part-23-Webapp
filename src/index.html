<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>ISO/IEC 21000-23 MPEG-21 Smart Contracts for Media</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.rawgit.com/codemirror/CodeMirror/master/lib/codemirror.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.rawgit.com/codemirror/CodeMirror/master/theme/base16-dark.css"
    />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <h1 class="text-center">
            <b> ISO/IEC 21000-23 Smart Contracts for Media </b>
          </h1>
          <br />
          <center>
            This webapp uses the ISO/IEC 21000-23 Smart Contracts for Media APIs
            (<a href="https://scm.linkeddata.es/docs">MCO specification</a> and
            <a href="https://scm.linkeddata.es/cel/docs">CEL specification</a>).
          </center>
          <hr />
          <center>
            This demo converts MPEG-21 MCO Contracts to smart contracts in
            Ethereum and Algorand and MPEG-21 CEL Contracts to smart contracts
            in Ethereum and Tezos.
          </center>
          <br />
          <div class="col-xs-12 col-sm-12">
            <h4 class="text-center">
              <b> Select Technology </b>
            </h4>
            <h1 class="text-center">
              <div class="btn-group btn-group-toggle" data-toggle="buttons">
                <label class="btn btn-success btn-case btn-lg" data-id="0">
                  <input
                    type="radio"
                    name="options"
                    id="option1"
                    autocomplete="off"
                    checked
                  />
                  CEL
                </label>
                <label
                  class="btn btn-success btn-case btn-lg active"
                  data-id="1"
                >
                  <input
                    type="radio"
                    name="options"
                    id="option2"
                    autocomplete="off"
                  />
                  MCO
                </label>
              </div>
              <br />
              <div id="algobutton">
                <div class="btn-group btn-group-toggle" data-toggle="buttons">
                  <label
                    class="btn btn-danger btn-case btn-lg active"
                    data-id="7"
                  >
                    <input
                      type="radio"
                      name="options"
                      id="option441"
                      autocomplete="off"
                      checked
                    />
                    Ethereum
                  </label>
                  <label class="btn btn-danger btn-case btn-lg" data-id="8">
                    <input
                      type="radio"
                      name="options"
                      id="option442"
                      autocomplete="off"
                    />
                    Algorand
                  </label>
                </div>
              </div>
              <div id="tezosbutton" style="display: none">
                <div class="btn-group btn-group-toggle" data-toggle="buttons">
                  <label
                    class="btn btn-danger btn-case btn-lg active"
                    data-id="7"
                  >
                    <input
                      type="radio"
                      name="options"
                      id="option443"
                      autocomplete="off"
                      checked
                    />
                    Ethereum
                  </label>
                  <label class="btn btn-danger btn-case btn-lg" data-id="9">
                    <input
                      type="radio"
                      name="options"
                      id="option444"
                      autocomplete="off"
                    />
                    Tezos
                  </label>
                </div>
              </div>
              <br />
            </h1>
          </div>

          <center>
            Each MPEG-21 CEL/MCO Contract given as input in this demo can be
            converted into a dedicated smart contract in three different
            Distributed Ledger Technologies (DLT), namely Ethereum, Algorand and
            Tezos. This smart contract, that it is refered as Smart Contract for
            Media, holds all the information regarding the MPEG-21 CEL/MCO
            Contract, including: revenue percentages of each party involved in
            the distribution of royalties, DLT addresses representing the
            parties in the contract and deontic expressions related to the
            contract, such as permissions, prohibitions or obligations stored
            through Non Fungible Tokens (<a
              id="clink"
              href="https://eips.ethereum.org/EIPS/eip-721"
              target="_blank"
              >NFT</a
            >).
            <br />
            <br />
            The demo is dvided in two parts: the Forward Conversion and the
            Backward Conversion.
            <br />
            <br />
            <br />
          </center>
        </div>
      </div>
    </div>

    <!-- MPEG-21 CEL/MCO Contract to Smart Contract for Media -->
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <hr />
          <h3 class="text-center">
            <b>
              Forward Conversion <br />
              MPEG-21 CEL/MCO Contract to Smart Contract for Media Conversion
            </b>
          </h3>
          <hr />
          In the Forward Conversion MPEG-21 CEL/MCO Contract to Smart Contract
          for Media the first window is used to show an MPEG-21 CEL/MCO template
          contracts that is chosen using the buttons right above. These contract
          templates are represented in the ISO/IEC 21000-20 (2nd Ed) Contract
          Expression Language (CEL) in an XML format or in the ISO/IEC 21000-21
          (2nd Ed) Media Contract Ontology (MCO) in an RDF (Turtle) format. The
          templates can be edited through the window.
          <br />
          Once the button "Convert to Media Contractual Objects" is clicked the
          second window will show the Media Contractual Objects extracted from
          the MPEG-21 CEL/MCO Contract.
          <br />
          In some cases a third window will show a Smart Contract Specification
          generated by clicking the button “Prepare Smart Contract
          Specification”. THis specification consists of a data structure
          containing all the information needed as input for the Smart Contract
          for Media deployment. Below this window, will appear too the doughnut
          charts representing data with respect to the revenue percentages of
          each party involved in the distribution of royalties (e.g., splits).
          <br />
          Finally, the information for the deploy of the Smart Contract for
          Media in the selected distributed ledger technology are shown (point
          4).
          <br />
          <br />
          <br />
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <h4 class="text-center">
            1) MPEG-21 CEL/MCO Contract template selection
          </h4>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <h1 class="text-center">
            <div class="btn-group btn-group-toggle" data-toggle="buttons">
              <label class="btn btn-warning btn-case btn-lg active" data-id="2">
                <input
                  type="radio"
                  name="options"
                  id="option1"
                  autocomplete="off"
                  checked
                />
                On demand stream
              </label>
              <label class="btn btn-warning btn-case btn-lg" data-id="3">
                <input
                  type="radio"
                  name="options"
                  id="option2"
                  autocomplete="off"
                />
                Digital sale
              </label>
            </div>
            <br />

            <div class="btn-group btn-group-toggle" data-toggle="buttons">
              <label class="btn btn-primary btn-case btn-lg" data-id="4">
                <input
                  type="radio"
                  name="options"
                  id="option1"
                  autocomplete="off"
                  checked
                />
                Big labels
              </label>
              <label class="btn btn-primary btn-case btn-lg active" data-id="5">
                <input
                  type="radio"
                  name="options"
                  id="option2"
                  autocomplete="off"
                />
                Indie labels
              </label>
              <label class="btn btn-primary btn-case btn-lg" data-id="6">
                <input
                  type="radio"
                  name="options"
                  id="option3"
                  autocomplete="off"
                />
                Self-released
              </label>
            </div>
          </h1>
        </div>
      </div>

      <br />

      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <textarea id="editor"></textarea>
        </div>
      </div>

      <br />

      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <h4 class="text-center">
            2) MPEG-21 CEL/MCO Contract to Media Contractual Objects
          </h4>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <div id="convertotomcobtn">
            <center>
              <button class="btn btn-primary btn-contract" type="button">
                Convert to Media Contractual Objects
              </button>
            </center>
          </div>
        </div>
      </div>

      <br />

      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <textarea id="editor2"></textarea>
        </div>
      </div>

      <br />

      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <h4 class="text-center">
            3) Media Contractual Objects to Smart Contract Specification
          </h4>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <div id="convertotomcobtn2">
            <center>
              <button class="btn btn-primary btn-convert" type="button">
                Prepare Smart Contract Specification
              </button>
            </center>
          </div>
        </div>
      </div>

      <br />

      <div class="row">
        <div class="col-xs-12 col-sm-12" id="convertotomcobtn2editor">
          <textarea id="editor3"></textarea>
        </div>
      </div>

      <div class="row">
        <div id="incomes" class="col-xs-12 col-sm-12">
          <center><h4>Royalties Distribution</h4></center>
          <div id="pies"></div>
        </div>
      </div>

      <br />

      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <h4 class="text-center">4) Deploy Smart Contract for Media</h4>
        </div>
        <div id="ethereumDeploy">
          <hr />
          <center><h4>Ethereum</h4></center>
          In here the Smart Contract for Media is deployed to the Ethereum
          Ropsten network by using
          <a id="clink" href="./getmetamask.html" target="_blank">Metamask</a>.
          <div id="metamask" style="display: none">
            <center>
              <form action="./getmetamask.html" method="get">
                <button
                  class="btn btn-success btn-update btn-block"
                  type="submit"
                >
                  HOW TO SETUP METAMASK!
                </button>
              </form>
            </center>
          </div>
          <br />
          The NFTs containing the MPEG-21 CEL/MCO Contract clauses are listed in
          a unique registry found in a smart contract with address
          0xAec959Fa5EbF6DCC505643502371e29D93C7a86b of the Ethereum Ropsten
          test network.
          <br />
          The first window in this part shows the Smart Contract Template, that
          is the template used for implementing the Smart Contract for Media.
          Above this window, the bindings between MPEG-21 CEL/MCO Parties and
          Ethereum Addresses are also shown and can be edited. Valid addresses
          in the Ethereum Ropsten test network are required as input.
          <br />
          Finally, the Smart Contract for Media is deployed by clicking the
          "Deploy Smart Contract" button. During this operation the necessary
          NFTs are minted. The NFTs’ metadata are stored in IPFS and only the
          IPFS Content Identifier (e.g., the metadata IPFS hash pointer) is
          stored on the ledger. The deploy operation will return the Smart
          Contract for Media Address as result.
        </div>
        <div id="ethereumDeployCel">
          <hr />
          <center><h4>Ethereum</h4></center>
          <br />
          1)
          <br />
          2)
        </div>
        <div id="algorandDeploy" style="display: none">
          <hr />
          <center><h4>Algorand</h4></center>
          In here the Smart Contract for Media is deployed to an Algorand
          private local network.
          <br />
          The NFTs containing the MPEG-21 CEL/MCO Contract clauses are listed in
          a newly created registry for each deployment.
          <br />
          The first window in this part shows the Smart Contract Template, that
          is the template used for implementing the Smart Contract for Media.
          <br />
          The Smart Contract for Media is deployed by clicking the "Deploy Smart
          Contract" button. During this operation the necessary NFTs are minted.
          The NFTs’ metadata are stored in IPFS and only the IPFS Content
          Identifier (e.g., the metadata IPFS hash pointer) is stored on the
          ledger. The deploy operation will return the Smart Contract for Media
          id and an NFT contract id as result.
        </div>
        <div id="tezosDeploy" style="display: none">
          <hr />
          <center>
            <h4>Tezos</h4>
            The Smart Contract for Media is deployed to a Tezos test network
            following the demo in this link:
            <br />
            <div id="linkuno">
              <a
                id="clink"
                href="https://smartpy.io/ide?cid=QmbiREA4V7CQGQYxKtfx6SN8J2fcfgHteMRpt149mgiK7d&k=2e56fa9ae7e349ded3f2"
                target="_blank"
                >https://smartpy.io/ide?cid=QmbiREA4V7CQGQYxKtfx6SN8J2fcfgHteMRpt149mgiK7d&k=2e56fa9ae7e349ded3f2</a
              >
            </div>
            <div id="linkdue">
              <a
                id="clink"
                href="https://smartpy.io/ide?cid=QmQy7K4vowQpEbvZhamWX5u91Ve4i5foDCuxHgGa4r8tsE&k=2fda33493e0b0a0680af"
                target="_blank"
                >https://smartpy.io/ide?cid=QmQy7K4vowQpEbvZhamWX5u91Ve4i5foDCuxHgGa4r8tsE&k=2fda33493e0b0a0680af</a
              >
            </div>
            <div id="linktre">
              <a
                id="clink"
                href="https://smartpy.io/ide?cid=QmTcfXt7z9yv3ARX2cbsBvRC34RsL4xUsNcio3kDaXqViW&k=31febcbbca303b206945"
                target="_blank"
                >https://smartpy.io/ide?cid=QmTcfXt7z9yv3ARX2cbsBvRC34RsL4xUsNcio3kDaXqViW&k=31febcbbca303b206945</a
              >
            </div>
            <div id="linkquat">
              <a
                id="clink"
                href="https://smartpy.io/ide?cid=Qma8ECvWkD7chbzrkqtzags5u2xwZZJ9PyDLt1sPhn82oV&k=a25667d5b2e04e8e983c"
                target="_blank"
                >https://smartpy.io/ide?cid=Qma8ECvWkD7chbzrkqtzags5u2xwZZJ9PyDLt1sPhn82oV&k=a25667d5b2e04e8e983c</a
              >
            </div>
            <div id="linkcin">
              <a
                id="clink"
                href="https://smartpy.io/ide?cid=QmbJyjs2WfAi8Dxo8eDAVCYMC2C53WQrppuSfvD9CB7qWi&k=264229eda720974ce0ee"
                target="_blank"
                >https://smartpy.io/ide?cid=QmbJyjs2WfAi8Dxo8eDAVCYMC2C53WQrppuSfvD9CB7qWi&k=264229eda720974ce0ee</a
              >
            </div>
            <div id="linksei">
              <a
                id="clink"
                href=" https://smartpy.io/ide?cid=QmXDA5wCTTSa3TmFLx93qQz7ZpK4y7YXtBvxvFFFQjqdfj&k=3a0779f1247de60d5f29"
                target="_blank"
              >
                https://smartpy.io/ide?cid=QmXDA5wCTTSa3TmFLx93qQz7ZpK4y7YXtBvxvFFFQjqdfj&k=3a0779f1247de60d5f29</a
              >
            </div>
          </center>
        </div>
      </div>

      <div class="row">
        <div id="bindings" class="col-xs-12 col-sm-8 col-sm-push-2">
          <center>
            <h4>MPEG-21 CEL/MCO Parties and DLT Addresses Bindings</h4>
          </center>
          <form id="bindingsForm"></form>
        </div>
      </div>

      <div class="row" id="templatesc">
        <div class="col-xs-12 col-sm-12">
          <center>
            <h4>Smart Contract Template</h4>
          </center>
          <textarea id="editor4"></textarea>
        </div>
      </div>
      <br />

      <div class="row" id="buttonsdepl">
        <div class="col-xs-12 col-sm-12">
          <div id="convertotomcobtn3">
            <center>
              <button
                id="deploybtn"
                class="btn btn-success btn-refresh"
                type="button"
              >
                Deploy on Ethereum
              </button>
              <button
                id="deploybtn2"
                style="display: none"
                class="btn btn-danger btn-refresh3"
                type="button"
              >
                Deploy on Algorand
              </button>
            </center>
            <div id="mcoup">Waiting for deploying contract...</div>
            <a id="clinkMain" href="" target="_blank"></a>
          </div>
        </div>
      </div>

      <div class="row" id="logscdep">
        <div class="col-xs-12 col-sm-12">
          <textarea id="editorLog1"></textarea>
        </div>
      </div>

      <div id="resscdep">
        Result:
        <br />
        <div id="formdiv01">
          <label for="scmaddr">SCM Address/ID:</label>
          <input type="text" id="scmaddr" name="scmaddr" value=" " size="42" />
        </div>
        <div id="formdiv02">
          <label for="nftaddr">NFT Address/ID:</label>
          <input type="text" id="nftaddr" name="nftaddr" value=" " size="42" />
        </div>
      </div>
    </div>

    <br />
    <br />
    <br />
    <br />
    <br />

    <!--  Smart Contract for Media to MPEG-21 CEL/MCO Contract -->
    <div class="container" id="container_back">
      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <hr />
          <h3 class="text-center">
            <b>
              Backward Conversion <br />
              Smart Contract for Media to MPEG-21 CEL/MCO Contract Conversion
            </b>
          </h3>
          <hr />
          In the Backward Conversion Smart Contract for Media to MPEG-21 CEL/MCO
          Contract the two input fields are used to provide the information to
          retrieve the Smart Contract for Media. In some cases the first window
          will show a set of Media Contractual Objects obtained from the Smart
          Contract for Media after clicking "Parse Smart Contract for Media".
          <br />
          Finally, the last window will show the MPEG-21 CEL/MCO Contract
          obtained from the Smart Contract for Media after clicking "Convert to
          MPEG-21 CEL/MCO Contract"
          <br />
          <br />
          <br />
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <h4 class="text-center">
            1) Smart Contract for Media to Media Contractual Objects
          </h4>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <div id="convertotomcobtn4">
            <div id="formdiv">
              <label for="caddr">SCM Address/ID:</label>
              <input
                type="text"
                id="caddr"
                name="caddr"
                value="0x89e1be5b0E9884B4153F5C094A0C676283356A53"
                size="42"
              />
              <br />
              <label for="caddr2">NFT Address/ID:</label>
              <input
                type="text"
                id="caddr2"
                name="caddr2"
                value="0xAec959Fa5EbF6DCC505643502371e29D93C7a86b"
                size="42"
              />
            </div>
          </div>
          <div class="col-xs-12 col-sm-12" id="toremovecel">
            <center>
              <button
                id="parsebtn"
                class="btn btn-success btn-refresh2"
                type="button"
              >
                Parse Smart Contract for Media Ethereum
              </button>
              <button
                id="parsebtn2"
                class="btn btn-success btn-refresh44"
                type="button"
              >
                Parse Smart Contract for Media Algorand
              </button>
            </center>
          </div>
        </div>
      </div>

      <br />

      <div class="row">
        <div class="col-xs-12 col-sm-12" id="toremovecel2">
          <textarea id="editor22"></textarea>
        </div>
      </div>

      <br />

      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <h4 class="text-center">
            2) Media Contractual Objects to MPEG-21 CEL/MCO Contract
          </h4>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <div id="convertotomcobtn7">
            <center>
              <button class="btn btn-primary btn-contract2" type="button">
                Convert to MPEG-21 CEL/MCO Contract
              </button>
            </center>
          </div>
        </div>
      </div>

      <br />

      <div class="row">
        <div class="col-xs-12 col-sm-12">
          <textarea id="editor12"></textarea>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/web3.min.js"></script>
    <!-- <script src="js/truffle-contract.js"></script> -->
    <script src="js/app.js"></script>
    <script type="text/javascript" src="js/codemirror.js"></script>
    <script
      type="text/javascript"
      src="https://cdn.rawgit.com/codemirror/CodeMirror/master/mode/turtle/turtle.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.rawgit.com/codemirror/CodeMirror/master/mode/javascript/javascript.js"
    ></script>
    <script
      type="text/javascript"
      src="https://www.gstatic.com/charts/loader.js"
    ></script>
    <script type="text/javascript">
      google.charts.load('current', { packages: ['corechart'] });
    </script>
    <script type="text/javascript" src="js/scm.min.js"></script>
  </body>
</html>
