<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>ISO/IEC 21000-23 MPEG-21 Smart Contracts for Media</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.rawgit.com/codemirror/CodeMirror/master/lib/codemirror.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.rawgit.com/codemirror/CodeMirror/master/theme/base16-dark.css"
    />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-sm-8 col-sm-push-2">
          <h1 class="text-center">
            ISO/IEC 21000-23 Smart Contracts for Media
          </h1>
          <hr />
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12 col-sm-8 col-sm-push-2">
        <h1 class="text-center">
          <div class="btn-group btn-group-toggle" data-toggle="buttons">
            <label class="btn btn-success btn-case btn-lg" data-id="0">
              <input
                type="radio"
                name="options"
                id="option1"
                autocomplete="off"
                checked
              />
              CEL
            </label>
            <label class="btn btn-success btn-case btn-lg active" data-id="1">
              <input
                type="radio"
                name="options"
                id="option2"
                autocomplete="off"
              />
              MCO
            </label>
          </div>
          <br />

          <div class="btn-group btn-group-toggle" data-toggle="buttons">
            <label class="btn btn-warning btn-case btn-lg active" data-id="2">
              <input
                type="radio"
                name="options"
                id="option1"
                autocomplete="off"
                checked
              />
              On demand stream
            </label>
            <label class="btn btn-warning btn-case btn-lg" data-id="3">
              <input
                type="radio"
                name="options"
                id="option2"
                autocomplete="off"
              />
              Digital sale
            </label>
          </div>
          <br />

          <div class="btn-group btn-group-toggle" data-toggle="buttons">
            <label class="btn btn-primary btn-case btn-lg" data-id="4">
              <input
                type="radio"
                name="options"
                id="option1"
                autocomplete="off"
                checked
              />
              Big labels
            </label>
            <label class="btn btn-primary btn-case btn-lg active" data-id="5">
              <input
                type="radio"
                name="options"
                id="option2"
                autocomplete="off"
              />
              Indie labels
            </label>
            <label class="btn btn-primary btn-case btn-lg" data-id="6">
              <input
                type="radio"
                name="options"
                id="option3"
                autocomplete="off"
              />
              Self-released
            </label>
          </div>
        </h1>
      </div>
    </div>

    <br />

    <div class="row">
      <div class="col-sm-6"><textarea id="editor"></textarea></div>
      <div class="col-sm-6"><textarea id="editor2"></textarea></div>
    </div>

    <div class="row">
      <div id="bo" class="col-sm-6"></div>
      <div class="col-sm-6">
        <div id="convertotomcobtn" class="col-sm-6">
          <button class="btn btn-primary btn-contract" type="button">
            Convert to Media Contractual Objects
          </button>
        </div>
      </div>
    </div>

    <br />

    <div class="row">
      <div class="col-sm-6"><textarea id="editor3"></textarea></div>
      <div id="incomes" class="col-sm-6">
        <center><h2>Royalties Distribution</h2></center>
        <div id="pies"></div>
      </div>
    </div>

    <div class="row">
      <div id="convertbtn" class="col-sm-6">
        <button class="btn btn-primary btn-convert" type="button">
          Prepare Smart Contract for Media
        </button>
        <button
          id="deploybtn"
          style="display: none"
          class="btn btn-success btn-refresh"
          type="button"
        >
          Deploy Smart Contract for Media
        </button>
        <div id="formdiv">
          <label for="caddr">Contract Address:</label>
          <input
            type="text"
            id="caddr"
            name="caddr"
            value="0xAec959Fa5EbF6DCC505643502371e29D93C7a86b"
            size="42"
          />
          <button
            id="parsebtn"
            class="btn btn-success btn-refresh"
            type="button"
          >
            Parse Smart Contract for Media
          </button>
          <div id="mcoup">Waiting for deploying contract...</div>
          <a id="clinkMain" href="" target="_blank"></a>
        </div>
      </div>
    </div>

    <div class="row">
      <div id="bindings" class="col-sm-6">
        <center>
          <h2>MPEG-21 CEL/MCO Parties and DLT Addresses Bindings</h2>
        </center>
        <form id="bindingsForm"></form>
      </div>
    </div>

    <div class="container">
      <br />
      <hr />
      <div class="col-xs-12 col-sm-8 col-sm-push-2">
        <center>
          <h2>ISO/IEC 21000-23 Smart Contract for Media demo</h2>
          <br />
          This webapp uses the ISO/IEC 21000-23 Smart Contracts for Media APIs
          (<a href="https://scm.linkeddata.es/docs">specification</a> and
          <a href="https://scm.linkeddata.es/api">reference software</a>).
        </center>
        <br />
        <div id="metamask" style="display: none">
          <center>
            <form action="./getmetamask.html" method="get">
              <button
                class="btn btn-success btn-update btn-block"
                type="submit"
              >
                HOW TO SETUP METAMASK!
              </button>
            </form>
          </center>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12 col-sm-8 col-sm-push-2">
          <hr />
          On the upper part left hand side, a window is shown where different
          MPEG-21 CEL/MCO template contracts can be chosen. These contract
          templates can be represented in the ISO/IEC 21000-20 (2nd Ed) Contract
          Expression Language (CEL) in an XML format or in the ISO/IEC 21000-21
          (2nd Ed) Media Contract Ontology (MCO) in an RDF (Turtle) format. On
          the upper part right hand side, a window is shown where Media
          Contractual Objects are displayed by clicking the button “Convert to
          Media Contractual Objects”. On the lower part left hand side, a window
          is shown where the generated Smart Contract Specification is displayed
          by clicking the button “Prepare Smart Contract for Media”. Below this
          window, the bindings between MPEG-21 CEL/MCO Parties and DLT Addresses
          are also shown. On the lower part right hand side, data are shown in
          the form of doughnut charts with respect to the revenue percentages of
          each party involved in the distribution of royalties (e.g., splits).
          <br />
          <h3>Ethereum</h3>
          <br />
          1) Each MPEG-21 CEL/MCO Contract given as input in the upper part left
          hand side window can be converted into a dedicated Ethereum smart
          contract.
          <br />
          2) This smart contract, that it is refered as Smart Contract for
          Media, holds all the information regarding the MPEG-21 CEL/MCO
          Contract, including: revenue percentages of each party involved in the
          distribution of royalties, Ethereum addresses representing the parties
          in the contract and deontic expressions related to the contract, such
          as permissions, prohibitions or obligations stored through Non
          Fungible Tokens (NFTs, implemented as
          <a
            id="clink"
            href="https://eips.ethereum.org/EIPS/eip-721"
            target="_blank"
            >ERC721 Tokens</a
          >).
          <br />
          3) These NFTs are listed in a unique registry found in a smart
          contract with address 0xAec959Fa5EbF6DCC505643502371e29D93C7a86b of
          the Ethereum Ropsten test network (requires a
          <a id="clink" href="./getmetamask.html" target="_blank">Metamask</a>
          wallet to be installed).
          <br />
          4) On the lower part left hand side, when the "Prepare Smart Contract
          for Media" button is clicked, a new Smart Contract Specification is
          created, that is a data structure containing all the information
          needed as input for the Smart Contract for Media deployment.
          <br />
          5) Below this window, the bindings between MPEG-21 CEL/MCO Parties and
          Ethereum Addresses are also shown. Valid addresses in the Ethereum
          Ropsten test network are required as input.
          <br />
          6) The Smart Contract for Media is deployed by clicking the "Deploy
          Smart Contract" button. During this operation the necessary NFTs are
          minted. The NFTs’ metadata are stored in IPFS and only the IPFS
          Content Identifier (e.g., the metadata IPFS hash pointer) is stored on
          the ledger.
          <br />
          <hr />
          <br />
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/web3.min.js"></script>
    <!-- <script src="js/truffle-contract.js"></script> -->
    <script src="js/app.js"></script>
    <script type="text/javascript" src="js/codemirror.js"></script>
    <script
      type="text/javascript"
      src="https://cdn.rawgit.com/codemirror/CodeMirror/master/mode/turtle/turtle.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.rawgit.com/codemirror/CodeMirror/master/mode/javascript/javascript.js"
    ></script>
    <script
      type="text/javascript"
      src="https://www.gstatic.com/charts/loader.js"
    ></script>
    <script type="text/javascript">
      google.charts.load('current', { packages: ['corechart'] });
    </script>
    <script type="text/javascript" src="js/eth.scm.min.js"></script>
  </body>
</html>
