<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>MPEG21 MCO SC</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.rawgit.com/codemirror/CodeMirror/master/lib/codemirror.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.rawgit.com/codemirror/CodeMirror/master/theme/base16-dark.css"
    />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-sm-8 col-sm-push-2">
          <h1 class="text-center">MPEG-21 Smart Contracts for Media</h1>
          <hr />
        </div>
        <div class="col-xs-12 col-sm-8 col-sm-push-2">
          <center>
            MPEG-21 Smart Contract for Media webapp demo, based on Ethereum
            Smart contracts.
            <br />
            This webapp uses some
            <a href="https://scm.linkeddata.es/api">APIs</a> that are documented
            using the OpenApi specification in the
            <a href="https://scm.linkeddata.es/docs">DOCS</a>.
          </center>
          <br />
          A contract represented via the Media Contract Ontology and in a Turtle
          format is given in input in the top left text area. In the top right
          text area this contract will be converted into a set of Media
          Contractual Objects (MPEG-21 part 23).
          <div id="metamask" style="display: none">
            <center>
              <form action="./getmetamask.html" method="get">
                <button
                  class="btn btn-success btn-update btn-block"
                  type="submit"
                >
                  HOW TO SETUP METAMASK!
                </button>
              </form>
            </center>
          </div>
          <hr />
          <br />
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-6"><textarea id="editor"></textarea></div>
      <div class="col-sm-6"><textarea id="editor2"></textarea></div>
    </div>

    <div class="row">
      <div class="col-sm-6">
        <button class="btn btn-default btn-case" type="button" data-id="0">
          On demand stream - Big labels
        </button>
        <button class="btn btn-default btn-case" type="button" data-id="1">
          On demand stream - Indie labels
        </button>
        <button class="btn btn-default btn-case" type="button" data-id="2">
          On demand stream - Self-released
        </button>
        <button class="btn btn-default btn-case" type="button" data-id="3">
          Digital sale - Big labels
        </button>
        <button class="btn btn-default btn-case" type="button" data-id="4">
          Digital sale - Indie labels
        </button>
        <button class="btn btn-default btn-case" type="button" data-id="5">
          Digital sale - Self-released
        </button>
      </div>
      <div id="convertotomcobtn" class="col-sm-6">
        <button class="btn btn-primary btn-contract" type="button">
          Convert to Media Contractual Objects
        </button>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-sm-8 col-sm-push-2">
          <hr />
          At the bottom of this demo:
          <br />
          1) Each MCO contract given in input in the above text area can be
          converted into a dedicated smart contract.
          <br />
          2) This smart contract holds all the infos regarding the MCO contract,
          including royalties in the form of shared incomes, contract parties
          (Ethereum addresses) and pointers to Non Fungible Tokens that store
          the specification of a Permission, Prohibition or Obligation.
          <br />
          3) Non Fungibe Tokens (implemented as
          <a
            id="clink"
            href="https://eips.ethereum.org/EIPS/eip-721"
            target="_blank"
            >ERC721 Tokens</a
          >) are generally used for assets, debts or virtual collectables
          (games) and are, together with ERC20, the actual main use case for
          smart contracts.
          <br />
          4) For these tokens only one registry is used, i.e. the smart contract
          with address 0xAec959Fa5EbF6DCC505643502371e29D93C7a86b of the Ropsten
          test network. If you are reading here you should have
          <a id="clink" href="./getmetamask.html" target="_blank"
            >installed Metamask</a
          >
          , please switch to the Ropsten test network in the extension for the
          correct functioning.
          <br />
          5) When you click on "PREPARE Smart Contract for Media" a new
          structure is created containing all the data needed in input for the
          smart contract deployment, created from what is found on the top left
          text area.
          <br />
          6) Once prepared, on the right will appear the income shares
          (royalties) that will be deployed with the smart contract. On the
          basis of those, any payment to one of the parties that will be
          performed on the blockchain will be shared following the same
          percentages.
          <br />
          7) Below the incomes infos, a form for associating each contract party
          to an Ethereum address will be displayed (i.e. the bindings). Real
          valid addresses in the Ropsten network can be given in input.
          <br />
          8) Finally, the "Deploy Smart Contract" button will create a new smart
          contract containing the infos required for the back conversion.
          Several ERC721 token are minted and assigned to the
          Permission/Obligation/Prohibition assignee. The metadata of the token
          will be stored in IPFS and only the CID (the IPFS hash pointer) will
          be stored on chain. (Metamask will ask to confirm a new transaction
          for circa 8-12 times, one for each token to be minted.)
          <br />
          <hr />
          <br />
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-6"><textarea id="editor3"></textarea></div>
      <div id="pies" class="col-sm-6">
        <center><h2>Parties incomes</h2></center>
      </div>
    </div>

    <div class="row">
      <div id="convertbtn" class="col-sm-6">
        <button class="btn btn-primary btn-convert" type="button">
          PREPARE Smart Contract for Media
        </button>
        <button
          id="deploybtn"
          style="display: none"
          class="btn btn-success btn-refresh"
          type="button"
        >
          Deploy Smart Contract
        </button>
        <div id="formdiv">
          <label for="caddr">Contract Address:</label>
          <input
            type="text"
            id="caddr"
            name="caddr"
            value="0xAec959Fa5EbF6DCC505643502371e29D93C7a86b"
            size="42"
          />
          <div id="mcoup">Waiting for deploying contract...</div>
          <a id="clinkMain" href="" target="_blank"></a>
        </div>
      </div>
      <div id="bindings" class="col-sm-6">
        <center><h2>Parties address bindings</h2></center>
        <form id="bindingsForm"></form>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/web3.min.js"></script>
    <!-- <script src="js/truffle-contract.js"></script> -->
    <script src="js/app.js"></script>
    <script type="text/javascript" src="js/codemirror.js"></script>
    <script
      type="text/javascript"
      src="https://cdn.rawgit.com/codemirror/CodeMirror/master/mode/turtle/turtle.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.rawgit.com/codemirror/CodeMirror/master/mode/javascript/javascript.js"
    ></script>
    <script
      type="text/javascript"
      src="https://www.gstatic.com/charts/loader.js"
    ></script>
    <script type="text/javascript">
      google.charts.load('current', { packages: ['corechart'] });
    </script>
    <script type="text/javascript" src="js/eth.scm.min.js"></script>
  </body>
</html>
